<div class="container p-2">
    <div class="card shadow-sm p-3">
        <div class="d-flex justify-content-between my-1 align-items-center">
            <span class="fs-3 fw-bolder"> Category </span>
            <div>
                <button
                    mat-mini-fab
                    color="addon-wrapping"
                    class="me-2 shadow-none border-1 border"
                    type="button"
                    (click)="onFilterButtonClick()">
                    <i class="bi bi-funnel"></i>
                </button>
                <a mat-flat-button color="primary">
                    <!-- [routerLink]="['/admin/blog/new']"> -->
                    Add New
                </a>
            </div>
        </div>
        <mat-expansion-panel [expanded]="isFilterOptionsExpended"
            class="shadow-none">
            <hr class="m-0 my-2" />
            <div class="d-flex filter-options">
                <div class="input-group flex-nowrap filter-div me-2">
                    <span class="input-group-text" id="addon-wrapping">
                        <i class="bi bi-search"></i>
                    </span>
                    <input
                        (input)="onSearchInputChange($event)"
                        type="search"
                        class="form-control"
                        placeholder="Search"
                        aria-label="Search"
                        aria-describedby="addon-wrapping" />
                </div>
                <div class="form-floating filter-div me-2">
                    <select
                        (change)="onStatusChange($event)"
                        class="form-select"
                        id="floatingSelect"
                        aria-label="status">
                        <option value="0" selected>All</option>
                        <option value="1">Active</option>
                        <option value="2">Deleted</option>
                    </select>
                    <label for="floatingSelect">Status</label>
                </div>
            </div>
        </mat-expansion-panel>
    </div>
    @defer (when categories.length > 0) {
    <div class="mt-3 card shadow-sm p-3 table-responsive">
        <table class="table text-center table-bordered rounded-2 fs-6">
            <thead colo>
                <tr class="align-middle">
                    <th class="col-4">Name</th>
                    <th class="col-1">Status</th>
                    <th class="col-2">Action</th>
                </tr>
            </thead>
            <tbody>
                @for(category of categories; track category.id){
                <tr class="align-middle">
                    <td class="mat-primary">
                        {{ category.name }}
                    </td>
                    <td>
                        <span
                            class="badge rounded-pill fw-normal px-3 py-2"
                            [ngClass]="statusWiseClasses[category.status]">
                            {{ category.status | categoryStatusIntToValue }}
                        </span>
                    </td>
                    <td class="fs-5">
                        @if(editCategoryId == category.id){
                        <button mat-flat-button class="shadow-none me-2"
                            color="primary"
                            (click)="onEditConform()">
                            Update
                        </button>
                        <button mat-flat-button
                            class="shadow-none bg-secondary text-white"
                            (click)="onEditCancelButtonClick()">
                            Cancel
                        </button>
                        }@else {
                        <button mat-mini-fab class="bg-secondary shadow-none"
                            (click)="onEditButtonClick(category)"
                            title="Edit Category">
                            <i class="bi bi-pencil-square"></i>
                        </button>
                        }
                    </td>
                </tr>
                @if(editCategoryId == category.id){
                <app-add-edit-modal />
                }
                }
            </tbody>
        </table>
    </div>
    }@placeholder(minimum 1000ms) {
    <mat-progress-bar mode="indeterminate" class="rounded-4"></mat-progress-bar>
    }
</div>
